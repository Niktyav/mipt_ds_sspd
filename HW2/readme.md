# Задание
Дано два csv-файла с данными о клиентах [customer.csv](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW2/customer.csv) и их транзакциях [transaction.csv](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW2/transaction.csv).  
Необходимо выполнить следующее:  
Создать таблицы со следующими структурами и загрузить данные из csv-файлов. Детали приведены ниже.  
Выполнить следующие запросы:  
(1 балл) Вывести все уникальные бренды, у которых стандартная стоимость выше 1500 долларов.  
(1 балл) Вывести все подтвержденные транзакции за период '2017-04-01' по '2017-04-09' включительно.  
(1 балл) Вывести все профессии у клиентов из сферы IT или Financial Services, которые начинаются с фразы 'Senior'.  
(1 балл) Вывести все бренды, которые закупают клиенты, работающие в сфере Financial Services  
(1 балл) Вывести 10 клиентов, которые оформили онлайн-заказ продукции из брендов 'Giant Bicycles', 'Norco Bicycles', 'Trek Bicycles'.  
(1 балл) Вывести всех клиентов, у которых нет транзакций.  
(2 балла) Вывести всех клиентов из IT, у которых транзакции с максимальной стандартной стоимостью.  
(2 балла) Вывести всех клиентов из сферы IT и Health, у которых есть подтвержденные транзакции за период '2017-07-07' по '2017-07-17'.  

# Решение

## Анализ таблиц
1. представленный датасет уже находится в первой нормальной форме(значения всех колонок скалярны) 
2. Приведем БД ко второй нормальной форме  
    "каждый столбец, который не является ключом, зависит от первичного ключа."  
    первым кандидатом на выделение является  
       товар/продукт из "transaction"  
        это колонки "brand"	"product_line"	"product_class"	"product_size" "product_id"  
        и скорее всего "standard_cost" - очень похожа на базовую цену, относящуюся к самому товару(для полноценного приняти решения требукется интервью с пользователем)  
        колонка "list_price" при более глубоком анализе пропорциональна "standard_cost" - потому относим их тоже  к товару.  
        к тому же "list_price" не содержит пустых значений в отличии от "standard_cost"  
        "product_id"  - не содержит корректного кода для кодирования продукта (скорее это код группы товаров с внутренней закономерностью- )   
                        как пример для "product_id"=4 соответсвует 2 бренда "Giant Bicycles" и "Solex"   
        потому данный парамер относим к продукту, но для связи вводим новый ключ  

    вторым кандидатом на выделение в отдельную таблицу является адрес из таблицы "customers"  
       но комбинация значений  "address", "state" и " postcode" является уникальной  
       потому в данном кейсе выделение адреса можно не проводить  
     

    Потому для приведения ко второй нормальной форме выделяем продукт из "transaction",  
    после приведени ко второй нормальной форме данные не имеют транзистивных связей.
    
    Но несколько столбцов для "боевого проекта" стоит модернизировать на применение справочника - столбцы имеющие малое количество вариантов значений:
    - в таблице продуктов:   
       "brand"	"product_line"	"product_class"	"product_size"   
    - в таблице клиентов  
       столбцы: "job_industry_category",	"wealth_segment", "state", "country"  

       столбец "gender" - на текущий момент содержит 6 вариантов значений - но перевод в справочник лучше осуществить после интервью с пользователем(причины возникновения таких данных)   
       столбец "job_title" - тоже хороший кандидат на справочник, но достаточно большое число значений требуют дополнительного анализа для переходна на справочник   
       "deceased_indicator"	и "owns_car" - это однозначные булевые поля т.к. значения Да/Нет  
    - в таблице транзакций   
        столбец: "order_status" -  похож на булевый, но лучше  для развития системы сделать справочник  
    Так же введением справочников мы выполним кодирование полей, что будет полезно для целей последующего машинного обучения.


    ## Отрисовка диаграммы
    исходный код  диаграммы в файле [Vyatkin_Roman_hw1_shema_db.txt](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/Vyatkin_Roman_hw1_shema_db.txt)  
    визуальное представление  схемы [Vyatkin_Roman_hw1.pdf](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/Vyatkin_Roman_hw1.pdf)

    ## Создание таблиц и заполнение данных

    SQL скрипт создания и заполния базы данных [Vyatkin_Roman_hw1_scripts.sql](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/Vyatkin_Roman_hw1_scripts.sql)
    полноценное заполнение БД требует создания скрипта,  а обнаруженные аномалии с "product_id" фильтрации и кодирования/очистки данных
    Потому для примера приведено заполнение по несколько строк в каждой таблице. 
    Заполнение БД в PostgeSQL:  
    *[Диаграмма](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/diagramm.JPG)  
    *[Продукты](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/products.JPG)  
    *[Клиенты](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/customers.JPG)  
    *[Транзакции](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/transactions.JPG)




       



    




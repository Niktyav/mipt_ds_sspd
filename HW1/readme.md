# Задание
Дан файл с данными по клиентам и транзакциям: [customer_and_transaction.xlsx] (https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/customer_and_transaction.xlsx).  
Необходимо выполнить следующие пункты:  
*(2 балла) Продумать структуру базы данных и отрисовать в [редакторе](https://dbdiagram.io/home?utm_source=holistics&utm_medium=top_5_tools_blog).  
*(2 балла) Нормализовать базу данных (1НФ — 3НФ), описав, к какой нормальной форме приводится таблица и почему таблица в этой нормальной форме изначально не находилась.  
*(3 балла) Создать все таблицы в DBeaver, указав первичные ключи к таблицам, правильные типы данных, могут ли поля быть пустыми или нет (использовать команду CREATE TABLE).  
*(3 балла) Загрузить данные в таблицы в соответствии с созданной структурой (использовать команду INSERT INTO или загрузить файлы, используя возможности инструмента DBeaver; в случае загрузки файлами приложить скрины, что данные действительно были   залиты).

# Решение

## Анализ таблиц
1. представленный датасет уже находится в первой нормальной форме(значения всех колонок скалярны) 
2. Приведем БД ко второй нормальной форме  
    "каждый столбец, который не является ключом, зависит от первичного ключа."  
    первым кандидатом на выделение является  
       товар/продукт из "transaction"  
        это колонки "brand"	"product_line"	"product_class"	"product_size" "product_id"  
        и скорее всего "standard_cost" - очень похожа на базовую цену, относящуюся к самому товару(для полноценного приняти решения требукется интервью с пользователем)  
        колонка "list_price" при более глубоком анализе пропорциональна "standard_cost" - потому относим их тоже  к товару.  
        к тому же "list_price" не содержит пустых значений в отличии от "standard_cost"  
        "product_id"  - не содержит корректного кода для кодирования продукта (скорее это код группы товаров с внутренней закономерностью- )   
                        как пример для "product_id"=4 соответсвует 2 бренда "Giant Bicycles" и "Solex"   
        потому данный парамер относим к продукту, но для связи вводим новый ключ  

    вторым кандидатом на выделение в отдельную таблицу является адрес из таблицы "customers"  
       но комбинация значений  "address", "state" и " postcode" является уникальной  
       потому в данном кейсе выделение адреса можно не проводить  
     

    Потому для приведения ко второй нормальной форме выделяем продукт из "transaction",  
    после приведени ко второй нормальной форме данные не имеют транзистивных связей.
    
    Но несколько столбцов для "боевого проекта" стоит модернизировать на применение справочника - столбцы имеющие малое количество вариантов значений:
    - в таблице продуктов:   
       "brand"	"product_line"	"product_class"	"product_size"   
    - в таблице клиентов  
       столбцы: "job_industry_category",	"wealth_segment", "state", "country"  

       столбец "gender" - на текущий момент содержит 6 вариантов значений - но перевод в справочник лучше осуществить после интервью с пользователем(причины возникновения таких данных)   
       столбец "job_title" - тоже хороший кандидат на справочник, но достаточно большое число значений требуют дополнительного анализа для переходна на справочник   
       "deceased_indicator"	и "owns_car" - это однозначные булевые поля т.к. значения Да/Нет  
    - в таблице транзакций   
        столбец: "order_status" -  похож на булевый, но лучше  для развития системы сделать справочник  
    Так же введением справочников мы выполним кодирование полей, что будет полезно для целей последующего машинного обучения.


    ## Отрисовка диаграммы
    исходный код  диаграммы в файле [Vyatkin_Roman_hw1_shema_db.txt](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/Vyatkin_Roman_hw1_shema_db.txt)  
    визуальное представление  схемы [Vyatkin_Roman_hw1.pdf](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/Vyatkin_Roman_hw1.pdf)

    ## Создание таблиц и заполнение данных

    SQL скрипт создания и заполния базы данных [Vyatkin_Roman_hw1_scripts.sql](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/Vyatkin_Roman_hw1_scripts.sql)
    полноценное заполнение БД требует создания скрипта,  а обнаруженные аномалии с "product_id" фильтрации и кодирования/очистки данных
    Потому для примера приведено заполнение по несколько строк в каждой таблице. 
    Заполнение БД в PostgeSQL:
    [Диаграмма](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/diagramm.JPG)  
    [Продукты](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/products.JPG)  
    [Клиенты](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/customers.JPG)
    [Транзакции](https://github.com/Niktyav/mipt_ds_sspd/tree/main/HW1/transactions.JPG)




       



    



